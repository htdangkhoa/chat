<title>Home</title>

<div class="chat-box">
	<div class="left-content">
		<div class="info">
			<div>
				<p>DevChat</p>
				<i class="fa fa-bell" aria-hidden="true"></i>
				<div class="notification-label">1</div>
				<i class="fa fa-angle-down" aria-hidden="true" data-toggle="dropdown"></i>
				<ul class="dropdown-menu dropdown-menu-right" style="top: 35px;">
					<li><a ng-click="testEmail()">Account</a></li>
					<li><a data-toggle="modal" data-target="#settingsModal">Settings</a></li>
					<li role="presentation" class="divider"></li>
					<li><a href="/authentication/signout">Sign out</a></li>
				</ul>
			</div>

			<span>{{ ::username }}</span>
		</div>
		<ul class="channel-and-rooms">
			<li class="divider">
				<p>Channels</p>
				<i class="fa fa-plus-square-o" aria-hidden="true"></i>
			</li>
			<!--<li ng-repeat="_email in listEmail track by $index">{{ _email }}</li>-->
			<!--<li ng-repeat="user in users track by $index">{{user.email}}</li>-->
			<li class="divider" data-toggle="modal" data-target="#myModal" ng-click="createRoom('direct')" title="Open a direct message">
				<p>Direct messages</p>
				<i class="fa fa-plus-square-o" aria-hidden="true"></i>
			</li>
			<li ng-repeat="direct in directs" ng-if="direct.visible">
				<p ng-click="test(direct._id, 'direct')">{{ (direct.arrEmail[0] === email) ? direct.arrEmail[1] : direct.arrEmail[0] }}</p>
				<i class="fa fa-minus-square-o" aria-hidden="true" ng-click="deleteDirectMessage(direct._id)"></i>
			</li>
		</ul>
	</div>
	<div class="right-content">
		<div>
			<ul class="list-message">
				<li ng-repeat="message in listMessage">
					<span>{{ message.email }}</span>
					<p>{{ message.message }}</p>
				</li>
			</ul>
		</div>
		<div class="message-box">
			<textarea placeholder="Type your message..." ng-model="message" ng-keydown="send($event, message)"></textarea>
		</div>
	</div>
</div>

<!--Seach user modal-->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Direct message</h4>
        </div>
        <div class="modal-body">
			<div>
				<input type="text" placeholder="Enter email to start a conversation" ng-model="query" ng-keyup="search(query)"/>
				<button>Go</button>
			</div>
			<ul>
				<div ng-repeat="u in users track by $index" ng-click="createDirectMessage(u.email)">
					{{ u.username }} | <{{ u.email }}>
				</div>
			</ul>
        </div>
        <!--<div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>-->
      </div>
    </div>
</div>

<!--Settings modal-->
<div class="modal fade" id="settingsModal" role="dialog">
    <div class="modal-dialog modal-lg" style="left: 50%; margin: 7% 0; transform: translateX(-50%); max-width: 544px;">
      <div class="modal-content" style="width: auto;">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Settings</h4>
        </div>
        <div class="modal-body">
			<div class="settings">
				<div class="settings-body">
					<div class="settings-row">
						<div class="settings-col key">Notifications</div>
						<div class="settings-col val">
							<div class="checkbox">
									<input type="checkbox" id="ckbbNoti" checked>
									<label for="ckbbNoti">Enabled</label>
							</div>
						</div>
					</div>
					<hr>
					<div class="settings-row">
						<div class="settings-col key">Sound</div>
						<div class="settings-col val">
							<div class="checkbox">
									<input type="checkbox" id="ckbbSound" checked>
									<label for="ckbbSound">Enabled</label>
							</div>
						</div>
					</div>
					<hr>
					<div class="settings-row">
						<div class="settings-col key">Language</div>
						<div class="settings-col val">
							<select>
								<option ng-repeat="option in initOptionsLanguage" value="{{option.value}}">{{ option.key }}</option>
							</select>
						</div>
					</div>
				</div>
				<!--<div class="settings-footer">
					<button type="submit">Done</button>
				</div>-->
			</div>
        </div>
      </div>
    </div>
</div>

<div class="lost-connection" ng-if="!stt" ng-disabled="!stt">
	<div>
		<center>
			<h2>Reconnecting...</h2>
		</center>
	</div>
</div>
